{% extends "layout.html" %}
{% block title %}FAIRMicrobiome | Privacy processing{% endblock %}
{% block content %}
<br>
<h1>Updated P<sub>29</sub> Score</h1>
<div class="alert alert-success" role="alert">
   Privacy processing succeeded! The updated P<sub>29</sub> Score is displayed below.
</div>
<div id="p29result" data-p29result="{{ p29result }}"></div>
<div id="minlresult" data-minl-result="{{ minlresult }}"></div>
<div id="maxtresult" data-maxt-result="{{ maxtresult }}"></div>
<div id="k_anonresult" data-k-anon-result="{{ k_anonresult }}"></div>
<div class="row mt-3">
   <div class="col-md-4 mb-3">
      <div class="card" style="background-color: #F2EDE2;">
         <h5 class="card-header">P<sub>29</sub> Score
            <a  data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="GDPR-compliant privacy metric.">
            <i class="fa fa-info-circle info-icon" aria-hidden="true" style="color: #1E5B5E;"></i>
            </a>
         </h5>
         <div class="card-body">
            <div class="score-wrap">
               <div class="score">
                  <div class="score-bar">
                     <div class="placeholder"style="background-color: #F2EDE2;">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="408.69 10000" stroke="#FFFFFF"></circle>
                        </svg>
                     </div>
                     <div class="score-circle-p29">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="{{ dashArrayp29 }} 10000" stroke="url(#score-gradient-p29)"></circle>
                           <defs>
                              <linearGradient id="score-gradient-p29">
                                 <stop offset="0%" stop-color="#FF6363"></stop>
                                 <stop offset="25%" stop-color="#FEBE8C"></stop>
                                 <stop offset="100%" stop-color="#B6E2A1"></stop>
                              </linearGradient>
                           </defs>
                        </svg>
                     </div>
                  </div>
                  <div class="score-value">
                     <div class="score-name" >Score</div>
                     <div class="score-number">{{ p29result }}</div>
                  </div>
               </div>
            </div>
         </div>
         <div class="card-footer">
            <div id="scoreMessage-p29"></div>
         </div>
      </div>
   </div>
   <div class="col-md-4 mb-3">
      <div class="card" style="background-color: #F2EDE2;">
         <h5 class="card-header">Minimum l-value
            <a  data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="The minimal diversity of a sensitive attribute's values within an equivalence class (EC).">
            <i class="fa fa-info-circle info-icon" aria-hidden="true" style="color: #1E5B5E;"></i>
            </a>
         </h5>
         <div class="card-body">
            <div class="score-wrap">
               <div class="score">
                  <div class="score-bar">
                     <div class="placeholder"style="background-color: #F2EDE2;">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="408.69 10000" stroke="#FFFFFF"></circle>
                        </svg>
                     </div>
                     <div class="score-circle-minl">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="{{ dashArrayminl }} 10000" stroke="url(#score-gradient-minl)"></circle>
                           <defs>
                              <linearGradient id="score-gradient-minl">
                                 <stop offset="0%" stop-color="#FF6363"></stop>
                                 <stop offset="25%" stop-color="#FEBE8C"></stop>
                                 <stop offset="100%" stop-color="#B6E2A1"></stop>
                              </linearGradient>
                           </defs>
                        </svg>
                     </div>
                  </div>
                  <div class="score-value">
                     <div class="score-name" >Score</div>
                     <div class="score-number">{{ minlresult }}</div>
                  </div>
               </div>
            </div>
         </div>
         <div class="card-footer">
            <div id="scoreMessage-minl"></div>
         </div>
      </div>
   </div>
   <div class="col-md-4 mb-3">
      <div class="card" style="background-color: #F2EDE2;">
         <h5 class="card-header">Maximum t-value
            <a  data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="The maximum distance between the distribution of a sensitive attribute's value within an equivalence class (EC) and the distribution of the same attribute across the entire dataset.">
            <i class="fa fa-info-circle info-icon" aria-hidden="true" style="color: #1E5B5E;"></i>
            </a>
         </h5>
         <div class="card-body">
            <div class="score-wrap">
               <div class="score">
                  <div class="score-bar">
                     <div class="placeholder"style="background-color: #F2EDE2;">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="408.69 10000" stroke="#FFFFFF"></circle>
                        </svg>
                     </div>
                     <div class="score-circle-maxt">
                        <svg width="200" height="120">
                           <circle cx="100" cy="100" r="65" fill="none" stroke-width="25" stroke-linecap="round" stroke-dashoffset="-205.35" stroke-dasharray="{{ dashArraymaxt }} 10000" stroke="url(#score-gradient-maxt)"></circle>
                           <defs>
                              <linearGradient id="score-gradient-maxt">
                                 <stop offset="0%" stop-color="#FF6363"></stop>
                                 <stop offset="25%" stop-color="#FEBE8C"></stop>
                                 <stop offset="100%" stop-color="#B6E2A1"></stop>
                              </linearGradient>
                           </defs>
                        </svg>
                     </div>
                  </div>
                  <div class="score-value">
                     <div class="score-name" >Score</div>
                     <div class="score-number">{{ maxtresult }}</div>
                  </div>
               </div>
            </div>
         </div>
         <div class="card-footer">
            <div id="scoreMessage-maxt"></div>
         </div>
      </div>
   </div>
</div>
<div class="row mt-3">
   <div class="col-md-4 mb-3">
      <div class="card" style="background-color: #F2EDE2;">
         <h5 class="card-header">Minimum k-value
            <a  data-bs-toggle="tooltip" data-bs-placement="bottom"  data-bs-title="Each individual in the dataset remains indistinguishable from at least kâˆ’1 others within the same equivalence class (EC).">
            <i class="fa fa-info-circle info-icon" aria-hidden="true" style="color: #1E5B5E;"></i>
            </a>
         </h5>
         <div class="card-body" style="text-align: center;">
            <h1 class="display-3" style="color: #797771;">
               {{ result['Minimum k-anonymity'] }}
            </h1>
         </div>
         <div class="card-footer">
            <div id="scoreMessage-kanon"></div>
         </div>
      </div>
   </div>
   <div class="col-md-8 mb-6">
      <div class="card" style="background-color: #F2EDE2;">
         <h5 class="card-header">Reasons
         </h5>
         <div class="card-body">
            {% if reason_result %}
            {% for reason in reason_result %}
            <p>{{ reason }}</p>
            {% endfor %}
            {% else %}
            <p>No reason information available.</p>
            {% endif %}
         </div>
         <div class="card-footer">
            <a class="btn btn-link no-hover" type="button" data-bs-toggle="collapse" data-bs-target="#reasonsCollapse" aria-expanded="false" aria-controls="reasonsCollapse" style="color: #1E5B5E;">
            Show Explanation
            </a>
            <br>
            <div id="reasonsCollapse" class="collapse">
               <p>When the P<sub>29</sub> Score score equals zero, it signifies one of the unacceptable privacy risks within the dataset:</p>
               <ol>
                  <li>Singling out risks: This refers to the potential to isolate specific records that identify an individual within the dataset.</li>
                  <li>Linkability risks: This pertains to the capability to link two or more records related to the same data subject or a group of data subjects, either within the same database or across different databases.</li>
                  <li>Inference risks: This indicates the significant probability of deducing the value of an attribute (such as 390) from the values of a set of other attributes.</li>
               </ol>
               <p>These conditions highlight critical privacy concerns that must be addressed to ensure compliance and safeguard individuals' data according to GDPR.</p>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="row mt-3">
<div class="card" style="background-color: #F2EDE2;">
   <h5 class="card-header">Problematic info
      <a  data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Information regarding the area of problematic attributes.">
      <i class="fa fa-info-circle info-icon" aria-hidden="true" style="color: #1E5B5E;"></i>
      </a>
   </h5>
   <div class="card-body">
      {% if problems_result %}
      {% for problem in problems_result %}
      <p>{{ problem }}</p>
      {% endfor %}
      {% else %}
      <p>No problematic information available.</p>
      {% endif %}
   </div>
   <div class="card-footer">
      <a class="btn btn-link no-hover" type="button" data-bs-toggle="collapse" data-bs-target="#problemsCollapse" aria-expanded="false" aria-controls="problemsCollapse" style="color: #1E5B5E;">
      Show Explanation
      </a>
      <br>
      <div id="problemsCollapse" class="collapse">
         <p>A minimum k-value of 1 suggests the risk of singling out one specific individual within that equivalence class (EC). <br>
            A minimum l-value of 0 suggests the disclosure of specific values of sensitive attributes for the individual within that EC. <br>
            A maximum t-value greater than 0.5 indicates a severe risk of inferring specific values of sensitive attributes for the individual within that EC.
         </p>
      </div>
   </div>
</div>
<div class="alert alert-info d-flex justify-content-between align-items-center" style="margin-top: 1%;" role="alert">
   <p>The dataset has a P<sub>29</sub> Score higher than 0.0, which means that it can be further processed in the differential privacy module. Press continue to initiate this proces. </p>
   <a type="button" class="btn btn-primary-custom" href="\differential_privacy">Continue</a>
</div>
{% endblock %}